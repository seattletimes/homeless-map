<!doctype html>
<html>

<head>
  <title>
    <%= json.project.title %>
  </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <!-- Safari, you're the worst -->
  <meta name='format-detection' content='telephone=no'>
  <link rel="stylesheet" type="text/css" href="style.css">
  <%= t.include("partials/_head.html") %>
</head>

<body>

  <responsive-child class="map-container">
    <div class="outmost">
      <section class="chatter">
        <h1>PIT count of homeless persons, 2018</h1>
      </section>
      <div class="aspect-ratio-outer">
        <div class="aspect-ratio-inner">
          <leaflet-map zoom=10>
            <tile-layer layer="cartoPositronBlank"></tile-layer>
            <geo-json id="mainlayer">
              <geo-data></geo-data>
              <geo-style>{ "weight": 1, "color": "#000", "opacity":0.2, "fillOpacity": 0.8 }</geo-style>
              <geo-palette property="pit_2018">
                <color-mapping max=25 color="#edf8fb"></color-mapping>
                <color-mapping min=26 max=50 color="#b3cde3"></color-mapping>
                <color-mapping min=51 max=100 color="#8c96c6"></color-mapping>
                <color-mapping min=101 color="#88419d"></color-mapping>
              </geo-palette>
            </geo-json>
          </leaflet-map>
        </div>
        <aside class="legend">
          <h1>Map legend</h1>
          <ul class="scale">
            <li>
              <span class="block" style="background-color: #edf8fb"></span> 25 or less</li>
            <li>
              <span class="block" style="background-color: #b3cde3"></span> 26-50</li>
            <li>
              <span class="block" style="background-color: #8c96c6"></span> 51-100</li>
            <li>
              <span class="block" style="background-color: #88419d"></span> More than 100</li>
          </ul>
        </aside>
      </div>
    </div>
    <div class="outmost">
      <section class="chatter">
        <h1>PIT count of homeless persons, 2017</h1>
      </section>
      <div class="aspect-ratio-outer">
        <div class="aspect-ratio-inner">
          <leaflet-map zoom=10>
            <tile-layer layer="cartoPositronBlank"></tile-layer>
            <geo-json id="mainlayer">
              <geo-data></geo-data>
              <geo-style>{ "weight": 1, "color": "#000", "opacity":0.2, "fillOpacity": 0.8 }</geo-style>
              <geo-palette property="pit_2017">
                <color-mapping max=25 color="#edf8fb"></color-mapping>
                <color-mapping min=26 max=50 color="#b3cde3"></color-mapping>
                <color-mapping min=51 max=100 color="#8c96c6"></color-mapping>
                <color-mapping min=101 color="#88419d"></color-mapping>
              </geo-palette>
            </geo-json>
          </leaflet-map>
        </div>
        <aside class="legend">
          <h1>Map legend</h1>
          <ul class="scale">
            <li>
              <span class="block" style="background-color: #edf8fb"></span> 25 or less</li>
            <li>
              <span class="block" style="background-color: #b3cde3"></span> 26-50</li>
            <li>
              <span class="block" style="background-color: #8c96c6"></span> 51-100</li>
            <li>
              <span class="block" style="background-color: #88419d"></span> More than 100</li>
          </ul>
        </aside>
      </div>
    </div>
    <div class="outmost">
      <section class="chatter">
        <h1>Percent increase (PIT 2017 to 2018)</h1>
      </section>
      <div class="aspect-ratio-outer">
        <div class="aspect-ratio-inner">
          <leaflet-map zoom=10>
            <tile-layer layer="cartoPositronBlank"></tile-layer>
            <geo-json id="mainlayer">
              <geo-data></geo-data>
              <geo-style>{ "weight": 1, "color": "#000", "opacity":0.2, "fillOpacity": 0.8 }</geo-style>
              <geo-palette property="pit_percent">
                <color-mapping min=-1 max=-0.11 color="#d8b365"></color-mapping>
                <color-mapping min=-0.1 max=-0.01 color="#f6e8c3"></color-mapping>
                <color-mapping min=-0 max=0 color="#f5f5f5"></color-mapping>
                <color-mapping min=0.01 max=0.1 color="#c7eae5"></color-mapping>
                <color-mapping min=0.11 max=1 color="#5ab4ac"></color-mapping>
                <color-mapping min=1.01 color="#01665e"></color-mapping>
              </geo-palette>
            </geo-json>
          </leaflet-map>
        </div>
        <aside class="legend">
          <h1>Map legend</h1>
          <ul class="scale">
            <li>
              <span class="block" style="background-color: #d8b365"></span> -11% or less</li>
            <li>
              <span class="block" style="background-color: #f6e8c3"></span> -10% to -1%</li>
            <li>
              <span class="block" style="background-color: #f5f5f5"></span> No change</li>
            <li>
              <span class="block" style="background-color: #c7eae5"></span> +1% to +10%</li>
            <li>
              <span class="block" style="background-color: #5ab4ac"></span> +11% to +100%</li>
            <li>
              <span class="block" style="background-color: #01665e"></span> +101% or more</li>
          </ul>
        </aside>
      </div>
    </div>

    <div class="outmost">
      <section class="chatter">
        <h1>PIT count of homeless persons (2018) as percentage of total population</h1>
      </section>
      <div class="aspect-ratio-outer">
        <div class="aspect-ratio-inner">
          <leaflet-map zoom=10>
            <tile-layer layer="cartoPositronBlank"></tile-layer>
            <geo-json id="mainlayer">
              <geo-data></geo-data>
              <geo-style>{ "weight": 1, "color": "#000", "opacity":0.2, "fillOpacity": 0.8 }</geo-style>
              <geo-palette property="pit_vs_pop">
                <color-mapping max=0.01 color="#edf8fb"></color-mapping>
                <color-mapping min=0.02 max=0.1 color="#b3cde3"></color-mapping>
                <color-mapping min=0.1 color="#8c96c6"></color-mapping>
              </geo-palette>
            </geo-json>
          </leaflet-map>
        </div>
        <aside class="legend">
          <h1>Map legend</h1>
          <ul class="scale">
            <li>
              <span class="block" style="background-color: #edf8fb"></span> 1% or less</li>
            <li>
              <span class="block" style="background-color: #b3cde3"></span> 2-10%</li>
            <li>
              <span class="block" style="background-color: #8c96c6"></span> More than 10%</li>
          </ul>
        </aside>
      </div>
    </div>
  </responsive-child>
  <script>
    var geoData = <%= t.include("./pit_final.geo.json") %>;
    document.querySelectorAll('geo-data').forEach((gd) => {
      gd.innerHTML = JSON.stringify(geoData);
    });
  </script>
  <script src="app.js"></script>
  <% /*= t.include("partials/_foot.html"); */ %>
    <%= t.include("partials/_workHere.html") %>
</body>

</html>
